<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/fragments :: head(title='Editar Venta')"></head>
<body id="body-pd">
<header class="header" id="header">
    <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
    <div class="header_img"> <img src="https://i.imgur.com/hczKIze.jpg" alt=""> </div>
</header>
<div class="l-navbar" id="nav-bar">
    <nav class="nav">
        <div>
            <a href="#" class="nav_logo"> <i class='bx bx-layer nav_logo-icon'></i> <span class="nav_logo-name">Ecomerce Zapatillas</span> </a>
            <div class="nav_list">
                <a th:href="@{/web/usuarios}" class="nav_link"> <i class='bx bx-user nav_icon'></i> <span class="nav_name">Usuarios</span> </a>
                <a th:href="@{/web/productos}" class="nav_link"> <i class='bx bx-grid-alt nav_icon'></i> <span class="nav_name">Productos</span> </a>
                <a th:href="@{/web/ventas}" class="nav_link active"> <i class='bx bx-message-square-detail nav_icon'></i> <span class="nav_name">Ventas</span> </a>
                <a th:href="@{/web/detalleVentas}" class="nav_link"> <i class='bx bx-bookmark nav_icon'></i> <span class="nav_name">Detalles de Ventas</span> </a>
            </div>
        </div>
        <a href="#" class="nav_link"> <i class='bx bx-log-out nav_icon'></i> <span class="nav_name">SignOut</span> </a>
    </nav>
</div>
<div class="height-100 w-75 mx-auto">
    <div class="d-flex gap-2">
        <a th:href="@{/web/ventas}" class="btn btn-primary btn-sm text-white">Volver</a>
    </div>
    <div class="text-center mb-4">
        <h3 class="text-primary">Editar Venta</h3>
    </div>
    <form th:action="@{/web/updateVentas}" th:object="${ventasDto}" method="post" class="p-4 bg-light rounded shadow-sm">
        <div class="mb-3 row align-items-center">
            <label for="id" class="col-sm-3 col-form-label fw-bold">Id Venta:</label>
            <div class="col-sm-9">
                <input id="id" type="number" readonly class="form-control-plaintext" th:field="*{id}">
            </div>
        </div>
        <div class="mb-3 row">
            <label for="fecha" class="col-sm-3 col-form-label fw-bold">Fecha:</label>
            <div class="col-sm-9">
                <input id="fecha" type="date" class="form-control" th:field="*{fecha}">
            </div>
        </div>
        <div class="mb-3 row">
            <label for="usuarioId" class="col-sm-3 col-form-label fw-bold">Id del Usuario:</label>
            <div class="col-sm-9">
                <input id="usuarioId" type="number" class="form-control" th:field="*{usuarioId}">
            </div>
        </div>
        <div class="mt-4">
            <h5 class="text-primary">Detalles de Productos</h5>
            <table class="table table-striped table-hover shadow-sm rounded">
                <thead class="table-dark">
                <tr>
                    <th>Id Detalle</th>
                    <th>Id Producto</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Total</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="detalle, iterStat : ${ventasDto.detalles}">
                    <td th:text="${iterStat.index}"></td>
                    <td th:text="${detalle.productoId}"></td>
                    <td th:text="${detalle.cantidad}"></td>
                    <td th:text="${detalle.precioUnitario}"></td>
                    <td th:text="${detalle.cantidad * detalle.precioUnitario}"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="mt-4">
            <button type="submit" class="btn btn-success">Guardar Cambios</button>
        </div>
    </form>
</div>
</body>
</html>
